<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registro Completo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>Registro Completo de la Base de Datos</h3>
        <a href="/" class="btn btn-outline-light">â¬… Volver</a>
    </div>

    <div class="table-responsive">
        <table class="table table-dark table-hover align-middle">
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Nivel (cm)</th>
                    <th>Estado</th>
                    <th>Capacidad (%)</th>
                    <th>Bomba</th>
                </tr>
            </thead>
            <tbody id="tabla-completa"></tbody>
        </table>
    </div>
</div>

<script>
async function cargarRegistros() {
    const res = await fetch('/api/registros');
    const data = await res.json();

    const tbody = document.getElementById('tabla-completa');
    tbody.innerHTML = data.map(r => `
        <tr>
            <td>${r.fecha || '--'}</td>
            <td>${r.nivel_cm ?? '--'}</td>
            <td>${r.nivel ?? '--'}</td>
            <td>${r.capacidad ?? '--'}%</td>
            <td>
                <span class="badge ${r.bomba ? 'bg-danger' : 'bg-success'}">
                    ${r.bomba ? 'ON' : 'OFF'}
                </span>
            </td>
        </tr>
    `).join('');
}

cargarRegistros();
</script>

</body>
</html>
